import { useCallback, useEffect, useRef, useState } from "react"

1
async function getUsers(userIds){
    const result=userIds.map(id=>fetch('/users/${id}'))
    responses=await result.all(result)
    finalResult=await result.all(responses.map(response.json()))
    return finalResult
}

3
function countStates(orders){
    return orders.reduce((acc,cO)=>){
        const status=cO.status
        if(acc[status]){
            acc[status]++
        }
        else{
            acc[status]=1
        }
        return acc
    }
}

4
function App() {
    const [darkMode, setDarkMode] = useState(false);
    
    const darkModeRef=useRef(darkMode)

    useEffect(()=>{darkModeRef.current=darkMode},[darkMode])

    const handleStart = () => {
    setTimeout(() => {
    alert(`Dark Mode is: ${darkMode}`); // BUG: Shows old state
        }, 5000);
    };
    return (
        <div>
            <input type="checkbox" checked={darkMode} onChange={e => setDarkMode(e.target.checked)} />
            <button onClick={handleStart}>Start Timer</button>
        </div>
    );
}

5
function UserProfile({ userId }) {
    const [user, setUser] = useState(null);
   
    const fetchUser =useCallback(async()=> {
        const res = await fetch(`/api/users/${userId}`);
        setUser(await res.json());
    },[userId])
    useEffect(() => {
        fetchUser();
    }, [fetchUser]); 
    return <div>{user?.name}</div>;
}

6.
const useDebounce=(value,delay)=>{
    const [debouncedValue,setDebouncedValue]=useState(value)
    useEffect(()=>{
        const handler=setTimeout(()=>{
            setDebouncedValue(value)
        },delay)
        return()=>{
            clearTimeout(handler)
        }
    },[value,delay])
    return debouncedValue
}
